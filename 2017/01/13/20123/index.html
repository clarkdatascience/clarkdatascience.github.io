<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Use &lt;&gt;!= in SQL self join | Notes on Data Science</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="In this quiz, we try to find who lives in the same dorm, and the query almost works.
12345678910111213141516171819select a.id, b.id, a.building, a.room       from residences as a, residences as b wher">
<meta property="og:type" content="article">
<meta property="og:title" content="Use <>!= in SQL self join">
<meta property="og:url" content="https://clarkdatascience.github.io/2017/01/13/20123/index.html">
<meta property="og:site_name" content="Notes on Data Science">
<meta property="og:description" content="In this quiz, we try to find who lives in the same dorm, and the query almost works.
12345678910111213141516171819select a.id, b.id, a.building, a.room       from residences as a, residences as b wher">
<meta property="og:image" content="https://clarkdatascience.github.io/2017/01/13/20123/1.png">
<meta property="og:updated_time" content="2017-01-13T22:11:46.726Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Use <>!= in SQL self join">
<meta name="twitter:description" content="In this quiz, we try to find who lives in the same dorm, and the query almost works.
12345678910111213141516171819select a.id, b.id, a.building, a.room       from residences as a, residences as b wher">
<meta name="twitter:image" content="https://clarkdatascience.github.io/2017/01/13/20123/1.png">
  
    <link rel="alternate" href="/atom.xml" title="Notes on Data Science" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Notes on Data Science</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://clarkdatascience.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-20123" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/01/13/20123/" class="article-date">
  <time datetime="2017-01-13T17:44:51.000Z" itemprop="datePublished">2017-01-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/SQL/">SQL</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Use &lt;&gt;!= in SQL self join
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>In this quiz, we try to find who lives in the same dorm, and the query almost works.<br><img src="/2017/01/13/20123/1.png" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">select a.id, b.id, a.building, a.room</div><div class="line">       from residences as a, residences as b</div><div class="line"> where a.building = b.building</div><div class="line">   and a.room = b.room and a.id &lt; b.id</div><div class="line"> group by a.room;</div><div class="line"></div><div class="line"> output:</div><div class="line"> +--------+--------+----------+------+</div><div class="line"> |     id |     id | building | room |</div><div class="line"> +========+========+==========+======+</div><div class="line"> | 881256 | 413001 |   Crosby |   10 |</div><div class="line"> | 741532 | 496747 |   Crosby |   19 |</div><div class="line"> | 931027 | 612413 |   Crosby |   31 |</div><div class="line"> | 958827 | 170267 | Dolliver |    1 |</div><div class="line"> | 707536 | 104131 | Dolliver |   14 |</div><div class="line"> | 505241 | 477801 | Dolliver |    8 |</div><div class="line"> | 824292 | 118199 | Kendrick |   1A |</div><div class="line"> | 231742 | 105540 | Kendrick |   3B |</div><div class="line"> +--------+--------+----------+------+</div></pre></td></tr></table></figure>
<p>There, we use &lt;(or &gt;), <code>and a.room = b.room and a.id &lt; b.id</code> to make sure the situation that one person only appear once in either column1 or column2, they cannot be their own roommate. If we not add this judgment, the result will be:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">select a.id, b.id, a.building, a.room</div><div class="line">       from residences as a, residences as b</div><div class="line"> where a.building = b.building</div><div class="line">   and a.room = b.room</div><div class="line"> group by a.room;</div><div class="line"></div><div class="line"> output:</div><div class="line">+--------+--------+----------+------+</div><div class="line">|     id |     id | building | room |</div><div class="line">+========+========+==========+======+</div><div class="line">| 958827 | 958827 | Dolliver |    1 |  &lt;-- this person is their own roommate?!</div><div class="line">| 881256 | 881256 |   Crosby |   10 |  &lt;-- this person is their own roommate?!</div><div class="line">| 707536 | 707536 | Dolliver |   14 |  &lt;-- this person is their own roommate?!</div><div class="line">| 741532 | 741532 |   Crosby |   19 |  &lt;-- this person is their own roommate?!</div><div class="line">| 824292 | 824292 | Kendrick |   1A |  &lt;-- this person is their own roommate?!</div><div class="line">| 410315 | 410315 |   Crosby |   20 |  &lt;-- this person is their own roommate?!</div><div class="line">| 498446 | 498446 |   Crosby |   21 |  &lt;-- this person is their own roommate?!</div><div class="line">| 851866 | 851866 |   Crosby |   22 |  &lt;-- this person is their own roommate?!</div><div class="line">| 250841 | 250841 | Kendrick |   2B |  &lt;-- this person is their own roommate?!</div><div class="line">| 931027 | 931027 |   Crosby |   31 |  &lt;-- this person is their own roommate?!</div><div class="line">| 231742 | 231742 | Kendrick |   3B |  &lt;-- this person is their own roommate?!</div><div class="line">| 161282 | 161282 | Dolliver |    7 |  &lt;-- this person is their own roommate?!</div><div class="line">| 505241 | 505241 | Dolliver |    8 |  &lt;-- this person is their own roommate?!</div><div class="line">| 762907 | 762907 | Dolliver |    9 |  &lt;-- this person is their own roommate?!</div><div class="line">+--------+--------+----------+------+</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://clarkdatascience.github.io/2017/01/13/20123/" data-id="cixwdtlrf0001hgu3m3jbpv4n" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SQL-quiz/">SQL, quiz</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/01/13/twogithubonsamepc/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Use two different github accounts on the same computer
        
      </div>
    </a>
  
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Github/">Github</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SQL/">SQL</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL-quiz/">SQL, quiz</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/SQL-quiz/" style="font-size: 10px;">SQL, quiz</a> <a href="/tags/git/" style="font-size: 10px;">git</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/01/13/twogithubonsamepc/">Use two different github accounts on the same computer</a>
          </li>
        
          <li>
            <a href="/2017/01/13/20123/">Use &lt;&gt;!= in SQL self join</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 ClarkYu<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>